{% load static %}
<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ø¥Ø¶Ø§ÙØ© Ø¹Ù„Ø§Ø¬</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  <style>
    .tooth {
      fill: #fff;
      stroke: #000;
      cursor: pointer;
      transition: fill 0.2s;
    }
    .tooth:hover {
      fill: #d1ecf1;
    }
    .tooth.selected {
      fill: #0d6efd !important;
    }
  </style>
</head>
<body class="container py-5">

  <h2 class="mb-4">ğŸ¦· Ø¥Ø¶Ø§ÙØ© Ø¹Ù„Ø§Ø¬ Ø¬Ø¯ÙŠØ¯</h2>

  <form method="post">
    {% csrf_token %}

    <div class="mb-3">
      <label for="patient">Ø§Ù„Ù…Ø±ÙŠØ¶:</label>
      {{ form.patient }}
    </div>

    <div class="mb-3">
      <label for="treatment_type">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù„Ø§Ø¬:</label>
      {{ form.treatment_type }}
    </div>

    <div class="mb-3">
      <label for="doctor">Ø§Ø®ØªØ± Ø§Ù„Ø·Ø¨ÙŠØ¨:</label>
      {{ form.doctor }}
    </div>

    <div class="mb-3">
      <label for="notes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</label>
      {{ form.notes }}
    </div>

    <div class="mb-3">
      <label for="cost">Ø§Ù„ØªÙƒÙ„ÙØ©:</label>
      {{ form.cost }}
    </div>

    <!-- Ø­Ù‚Ù„ Ù…Ø®ÙÙŠ Ù„Ø­ÙØ¸ Ø±Ù‚Ù… Ø§Ù„Ø³Ù† -->
    <input type="hidden" name="tooth" id="toothInput" value="{{ form.tooth.value|default:'' }}">

    <div class="mb-4">
      <h5>ğŸ¦· Ø§Ø®ØªØ± Ø§Ù„Ø³Ù†:</h5>
      <svg width="600" height="200" viewBox="0 0 600 200">
        <!-- Ø§Ù„Ø£Ø³Ù†Ø§Ù† Ø§Ù„Ø¹Ù„ÙˆÙŠØ© (11 Ø¥Ù„Ù‰ 18) -->
        {% for i in "11 12 13 14 15 16 17 18".split %}
          <rect id="tooth{{ i }}" class="tooth" x="{{ forloop.counter0|add:10|mul:50 }}" y="20" width="40" height="40"
                onclick="selectTooth('{{ i }}')" />
        {% endfor %}

        <!-- Ø§Ù„Ø£Ø³Ù†Ø§Ù† Ø§Ù„Ø³ÙÙ„ÙŠØ© (41 Ø¥Ù„Ù‰ 48) -->
        {% for i in "41 42 43 44 45 46 47 48".split %}
          <rect id="tooth{{ i }}" class="tooth" x="{{ forloop.counter0|add:10|mul:50 }}" y="100" width="40" height="40"
                onclick="selectTooth('{{ i }}')" />
        {% endfor %}
      </svg>
    </div>

    <button type="submit" class="btn btn-primary">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¹Ù„Ø§Ø¬</button>
  </form>

  <script>
    let selectedTooth = null;

    function selectTooth(toothNumber) {
      if (selectedTooth) {
        document.getElementById("tooth" + selectedTooth).classList.remove("selected");
      }

      document.getElementById("tooth" + toothNumber).classList.add("selected");
      document.getElementById("toothInput").value = toothNumber;
      selectedTooth = toothNumber;
    }
  </script>
</body>
</html>
